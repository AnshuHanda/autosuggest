<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="unbxdAutosuggest.css">
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0/handlebars.min.js"></script>
	<script src="//code.jquery.com/jquery-1.10.2.js"></script>
	<script src="unbxdAutosuggest.js"></script>
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/chosen/1.1.0/chosen.min.css">
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/chosen/1.1.0/chosen.jquery.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
	<script type="text/javascript">
		$(function(){
    		$(".chzn-select").chosen();
		});
	</script>
	<style type="text/css">
		*{
			font-family: proxima-nova,Arial, sans-serif;
		}
.rt{
	float:right;
}

.lt{
	float: left;
}

.clearfix{
	
  box-sizing: content-box;
  width: 250px;
  height: 730px;

}
.searchBar{
	position: absolute;
  	left: 300px;
  	top: 50px;
}
.clearfix:after{
	clear: both;
	content: ".";
	display: block;
	font-size: 0px;
	height: 0px;
	visibilty: hidden;

}
.form-control{
	width: auto;
}
.chosen-container-multi .chosen-choices{
	width:80%;
}
	</style>
</head>
<body>
	<div id="inputField">
		

		<div class="clearfix" >
			<div >
				
				<div style="padding:5px 20px;">
					
					max no of keywords<br>
					<input class="form-control" type="text" name="keywords" value="2" style="width:60px" >
				</div>

				<div style="padding:5px 20px;">
					
					keywords Header<br>
					<input class="form-control" type="text" name="headerKeywords" >
				</div>
				<div style="padding:5px 20px;">
					max no of topqueries<br>
					<input class="form-control" type="text" name="topqueries" value="2" style="width:60px">
				</div>
				<div style="padding:5px 20px;">
					
					topqueries Header<br>
					<input class="form-control" type="text" name="headerTopqueries" >
				</div>
			</div>
			<div >
				<div style="padding:5px 20px;">
					max no of in-fields<br>
					<input class="form-control" type="text" name="infields" value="2" style="width:60px">
				</div>
				<div style="padding:5px 20px;">
					
					in-fields Header<br>
					<input class="form-control" type="text" name="headerInfields">
				</div>
				<div style="padding:5px 20px;">
					max no of products<br>
					<input class="form-control" type="text" name="products" value="2" style="width:60px">
				</div>
				<div style="padding:5px 20px;">
					
					products Header<br>
					<input class="form-control" type="text" name="headerProducts">
				</div>
				<div style="padding:5px 20px;">
					
					Main Width<br>
					<input class="form-control" type="text" name="widthMain" style="width:60px">
				</div>
				<div style="padding:5px 20px;">
					
					Side Width<br>
					<input class="form-control" type="text" name="widthSide" style="width:60px">
				</div>
				<div style="padding:5px 20px;">
					
					Site Name<br>
					<input class="form-control" type="text" name="siteName">
				</div>
				<div style="padding:5px 20px;">
					
					API Key<br>
					<input class="form-control" type="text" name="APIKey">
				</div>
			</div>
		
				
			<div style="padding:5px 20px">MainTpl 
				<select class="chzn-select input-lg" multiple="multiple" id="MainTpl" style="width:200px;">
  					<option value="inFields">inFields</option>
  					<option value="keywordSuggestions">keywordSuggestions</option>
 					<option value="topQueries">topQueries</option>
  					<option value="popularProducts">popularProducts</option>
				</select>	
			</div>
			<div style="padding:5px 20px;">SideTpl
				<select class="chzn-select" id="SideTpl" multiple style="width:200px">
  					<option value="inFields">inFields</option>
  					<option value="keywordSuggestions">keywordSuggestions</option>
 					<option value="topQueries">topQueries</option>
  					<option value="popularProducts">popularProducts</option>
				</select>	
			</div>
		<div style="padding:5px 20px;">Theme
			<select class="form-control" id="Theme">
  				<option value="#ff8400">Orange</option>
  				<option value="#19af91">Green</option>
  				<option value="#6f6f6f">Gray</option>
  				<option value="#004c92">Blue</option>
  			</select>
  		</div>
  		<div style="padding:5px 20px;">Config
			<select class="form-control" id="Config">
				<option value="0">None</option>
  				<option value="1">Config-1</option>
  				<option value="2">Config-2</option>
  				<option value="3">Config-3</option>
  				<option value="4">Config-4</option>
  			</select>
  		</div>
			<div style="padding:5px 20px;">
				<input class="content" type="radio" name="template" value="1column" checked> 1column &nbsp;
				<input class="content" type="radio" name="template" value="2column"> 2column 
			</div>
			<div style="padding:5px 20px;">
				<input class="content" type="radio" name="sideContent" value="left"> left &nbsp;
				<input class="content" type="radio" name="sideContent" value="right"> right
			</div>
			<div style="padding:5px 20px;">
				<input class="content" type="checkbox" name="showcarts" value="1"> Show add-to-carts
				<br>
				<input class="content" type="radio" name="cartType" value="inline"> inline &nbsp;
				<input class="content" type="radio" name="cartType" value="separate"> separate
			</div>
		</div>
	
	<div>
		<input id="input"  class="autoCmplt-input input-0 searchBar form-control"  placeholder="Please type here to search " type="text"  size="75" style="padding:4px;"/>
		<div id="custombody">
		</div>
	</div>
	<script type="text/javascript">
	
	

	$(function(){
		unbxdAutoSuggestFunction($, Handlebars);

		window.auto = $("#input").unbxdautocomplete({
			siteName : 'demosite-u1407617955968'
			,APIKey : '64a4a2592a648ac8415e13c561e44991'
			,minChars : 2
			,showCarts : false
			,template : "1column" // "2column"
			,cartType : "separate"
			,mainTpl: []
			,sideTpl: []
			,theme: "#ff8400"
			,onItemSelect : function(){
				console.log("onItemSelect",arguments);
			}
			,onCartClick : function(obj){
				console.log("addtocart",this, arguments);

				return true;
			}
			,inFields:{
				count: 2,
				fields:{
					'brand':3
					,'category':3
					,'color':3
				}
				,header:''
			},
			topQueries:{
				count: 2
				,header:''

			},
			
			keywordSuggestions:{
				count: 2
				,header:''
			}
			,popularProducts:{
				count: 2
				,price:true
				,priceFunctionOrKey : "price"
				,image:true
				,imageUrlOrFunction: "imageUrl"
				,currency : "Rs."
				,header:''
			}
		});
		/*counts start*/
		$("input[name=keywords]").blur(function(){
			console.log("keywordSuggestions.count", parseInt(this.value));
			auto[0].auto.setOption("keywordSuggestions.count", parseInt(this.value));
		});

		$("input[name=topqueries]").blur(function(){
			console.log("topQueries.count", parseInt(this.value));
			auto[0].auto.setOption("topQueries.count", parseInt(this.value));
		});

		$("input[name=infields]").blur(function(){
			console.log("inFields.count", parseInt(this.value));
			auto[0].auto.setOption("inFields.count", parseInt(this.value));
		});

		$("input[name=products]").blur(function(){
			console.log("popularProducts.count", parseInt(this.value));
			auto[0].auto.setOption("popularProducts.count", parseInt(this.value));
		});
		/*counts end*/

		
		/*header starts*/

		$("input[name=headerKeywords]").blur(function(){
			console.log("keywordSuggestions.header", this.value);
			auto[0].auto.setOption("keywordSuggestions.header", this.value);
		});

		$("input[name=headerTopqueries]").blur(function(){
			console.log("topQueries.header", this.value);
			auto[0].auto.setOption("topQueries.header", this.value);
		});

		$("input[name=headerInfields]").blur(function(){
			console.log("inFields.header", this.value);
			auto[0].auto.setOption("inFields.header", this.value);
		});

		$("input[name=headerProducts]").blur(function(){
			console.log("popularProducts.header", this.value);
			auto[0].auto.setOption("popularProducts.header", this.value);
		});

		
		
		/*header ends*/
		$("input[name=widthMain]").blur(function(){
			
			auto[0].auto.setOption("mainWidth", this.value);
		});
		$("input[name=widthSide]").blur(function(){
			
			auto[0].auto.setOption("sideWidth", this.value);
		});
		$("input[name=siteName]").blur(function(){
			
			auto[0].auto.setOption("siteName", this.value);
		});
		$("input[name=APIKey]").blur(function(){
			
			auto[0].auto.setOption("APIKey", this.value);
		});



		$("input[name=template]").change(function(){
			console.log("template", (this.value));
			auto[0].auto.setOption("template", (this.value));
		});

		$("input[name=sideContent]").change(function(){
			console.log("sideContentOn", (this.value));
			auto[0].auto.setOption("sideContentOn", (this.value));
		});

		$("input[name=showcarts]").change(function(){
			console.log("showCarts",$(this).is(":checked"));
			auto[0].auto.setOption("showCarts", $(this).is(":checked"));
		});

		$("input[name=cartType]").change(function(){
			console.log("cartType", (this.value));
			auto[0].auto.setOption("cartType", (this.value));
		});
		
		$("#Theme").change(function(){
			console.log("Theme",$( "#Theme option:selected" ).val());
			auto[0].auto.setOption("theme", $( "#Theme option:selected" ).val());
		});
		var values = [];
		$("#Config").change(function(){
			if($("#Config option:selected" ).val() === "0"){
				$("#MainTpl, #SideTpl, .content").prop("disabled",false);
				$('#MainTpl,#SideTpl').trigger('chosen:updated');
				auto[0].auto.setOption("mainTpl", []);
				auto[0].auto.setOption("sideTpl", []);
			}
			else{
				$("#MainTpl, #SideTpl, .content").prop("disabled",true);
				$('#MainTpl, #SideTpl').trigger('chosen:updated');
				if($("#Config option:selected" ).val() === "1"){
					auto[0].auto.setOption("mainTpl", ['inFields','keywordSuggestions','topQueries','popularProducts']);
					auto[0].auto.setOption("sideTpl", []);
					auto[0].auto.setOption("showCarts",true);
				}
				else if($("#Config option:selected" ).val() === "2"){
					auto[0].auto.setOption("mainTpl", ['inFields','popularProducts']);
					auto[0].auto.setOption("sideTpl", ['topQueries','keywordSuggestions']);
					auto[0].auto.setOption("template",'2column');
					auto[0].auto.setOption("sideContentOn", 'right');
					auto[0].auto.setOption("showCarts",true);
				}
				else if($("#Config option:selected" ).val() === "3"){
					auto[0].auto.setOption("mainTpl", ['inFields','popularProducts']);
					auto[0].auto.setOption("sideTpl", ['topQueries','keywordSuggestions']);
					auto[0].auto.setOption("template",'2column');
					auto[0].auto.setOption("sideContentOn", 'left');
					auto[0].auto.setOption("showCarts",true);
				}
				else if($("#Config option:selected" ).val() === "4"){
					auto[0].auto.setOption("mainTpl", ['popularProducts']);
					auto[0].auto.setOption("sideTpl", []);
					auto[0].auto.setOption("showCarts",true);
				}
			}
		});
		
		$('#MainTpl').change(function(){
			values=[];
			$("#SideTpl option").each(function(){
    			$(this).attr('disabled',false);
    			$('#SideTpl').trigger('chosen:updated');
			});
			$('#MainTpl :selected').each(function(i, selectedElement) {
 				values[i] = $(selectedElement).val();
 				$("#SideTpl option[value='"+ values[i] + "']").attr('disabled', true ); 
 				$('#SideTpl').trigger('chosen:updated');
			});
			auto[0].auto.setOption("mainTpl", values);
			console.log(typeof values);
		});

		$('#SideTpl').change(function(){
			values=[];
			$("#MainTpl option").each(function(){
    			$(this).attr('disabled',false);
    			$('#MainTpl').trigger('chosen:updated');
			});
			$('#SideTpl :selected').each(function(i, selectedElement) {
 				values[i] = $(selectedElement).val();
 				$("#MainTpl option[value='"+ values[i] + "']").attr('disabled', true );
 				$('#MainTpl').trigger('chosen:updated');
			});
			auto[0].auto.setOption("sideTpl", values);
		});
			
	});
	</script>
	<script type="text/javascript">
		var UnbxdSiteName = "demosite-u1407617955968",UnbxdAPIKey = "64a4a2592a648ac8415e13c561e44991";
		var s=document.createElement("script");
		s.src="//unbxd.s3.amazonaws.com/unbxdAnalytics.js";
		s.type="text/javascript";
		s.async=true;
		document.getElementsByTagName('head').item(0).appendChild(s);
	</script>
</body>
</html>
